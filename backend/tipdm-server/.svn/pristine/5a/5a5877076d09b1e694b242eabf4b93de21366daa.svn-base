package com.tipdm.framework.controller.dmserver.entity.datavisual;

import com.tipdm.framework.common.utils.StringKit;
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import org.slf4j.helpers.FormattingTuple;
import org.slf4j.helpers.MessageFormatter;

import java.util.List;

/**
 * Created by TipDM on 2017/8/23.
 * E-mail:devp@tipdm.com
 */
@ApiModel
public class VisualConfig {

//    @ApiModelProperty(name = "inputId", notes = "输入节点的值，对应后台的数据表", position = 0)
//    private String inputId;

    @ApiModelProperty(name = "keys", required = true, notes = "显示字段，多个字段以英文逗号分隔", example = "field1", position = 1)
    private String keys;

    @ApiModelProperty(name = "groups", required = true, notes = "分组字段，多个字段以英文逗号分隔", example = "field1", position = 2)
    private String groups;

    @ApiModelProperty(name = "values", required = true, notes = "统计字段", position = 3)
    private List<Value> values;

//    public String getInputId() {
//        return inputId;
//    }

//    public void setInputId(String inputId) {
//        this.inputId = inputId;
//    }

    public String getKeys() {
        return keys;
    }

    public void setKeys(String keys) {
        this.keys = keys;
    }

    public String getGroups() {
        return groups;
    }

    public void setGroups(String groups) {
        this.groups = groups;
    }

    public List<Value> getValues() {
        return values;
    }

    public void setValues(List<Value> values) {
        this.values = values;
    }

    public String toString(String tableName) {
        String pattern = "select {}, {} from {} group by {}";
        FormattingTuple formattingTuple = MessageFormatter.arrayFormat(pattern, new Object[]{keys, StringKit.join(values, ","), tableName, groups});
        return formattingTuple.getMessage();
    }
}
