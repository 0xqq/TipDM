package com.tipdm.framework.repository.dmserver;

import com.tipdm.framework.model.dmserver.Component;
import com.tipdm.framework.persist.BaseRepository;
import org.springframework.data.jpa.repository.Query;

import java.util.List;

/**
 * Created by zhoulong on 2017/1/3.
 * E-mail:zhoulong8513@gmail.com
 */
public interface ComponentRepository extends BaseRepository<Component, Long>{

    public void merge(Component component);

    public Integer countByParentIdAndCreatorId(Long parentId, Long creatorId);

    @Query("from Component where parentId=?1 and inBuilt=?2 order by sequence asc nulls last")
    public List<Component> findByParentId(Long parentId, Boolean inBuilt);

//    @Query("from Component where inBuilt= order by sequence asc nulls last,updateTime desc nulls last")
    public List<Component> findByInBuiltTrue();

    @Query("from Component where parentId=?1 and creatorId=?2 and inBuilt=?3 order by sequence asc nulls last")
    public List<Component> findByParentId(Long parentId, Long creatorId, Boolean inBuilt);

//    @Modifying
//    @Query("delete Component where id=?1 and creatorId=?2 and inBuilt=?3 ")
//    public void deleteComponent(Long id, Long creatorId, Boolean inBuilt);

}
